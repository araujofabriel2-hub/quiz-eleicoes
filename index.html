<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiz Elei√ß√µes</title>
<style>
body { font-family: Arial, sans-serif; padding: 20px; }
.quiz { max-width: 600px; margin: auto; }
.question { font-size: 20px; margin: 20px 0 10px; }
.option { display: block; margin: 5px 0; padding: 10px; border: 1px solid #ccc; cursor: pointer; border-radius: 8px; }
.option:hover { background: #f0f0f0; }
.option.disabled { pointer-events: none; opacity: 0.6; background: #eee; }
#results { margin-top: 40px; }
hr { margin: 20px 0; }
</style>
</head>
<body>
<div class="quiz">
  <h1>Quiz sobre Elei√ß√µes</h1>
  <div id="quiz-container"></div>
  <div id="results"></div>
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

<script>
// üîπ Configura√ß√£o do Firebase
const firebaseConfig = {
  apiKey: "AIzaSyDX84XCGCOuEwJW2UhEXDh77aDVRJ0GxpQ",
  authDomain: "quiz-eleicoes.firebaseapp.com",
  databaseURL: "https://quiz-eleicoes-default-rtdb.firebaseio.com",
  projectId: "quiz-eleicoes",
  storageBucket: "quiz-eleicoes.firebasestorage.app",
  messagingSenderId: "681152120442",
  appId: "1:681152120442:web:b96e1bf219b2386a1f1dc3"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// üîπ Perguntas do quiz
const perguntas = [
  { enunciado: "Voc√™ acredita que adolescentes de 16 e 17 anos est√£o aptos a votar?", opcoes: ["Sim", "Nao", "Nao sabe", "Nao respondeu"] },
  { enunciado: "Pretende votar nas pr√≥ximas elei√ß√µes?", opcoes: ["Sim", "Nao", "Nao sabe", "Nao respondeu"] },
  { enunciado: "Se voc√™ n√£o pretende votar nas pr√≥ximas elei√ß√µes, qual √© o motivo?", opcoes: ["Falta de interesse", "Falta de tempo", "Desconhecimento dos candidatos", "Outro"] },
  { enunciado: "Voc√™ confia no sistema eletr√¥nico de vota√ß√£o (urnas eletr√¥nicas)?", opcoes: ["Sim", "Nao", "Nao sabe", "Nao respondeu"] },
  { enunciado: "Voc√™ acha importante o voto ser obrigat√≥rio no Brasil?", opcoes: ["Sim", "Nao", "Nao sabe", "Nao respondeu"] },
  { enunciado: "Voc√™ j√° deixou de votar em alguma elei√ß√£o?", opcoes: ["Sim", "Nao"] },
  { enunciado: "Voc√™ acredita que seu voto faz diferen√ßa no resultado das elei√ß√µes?", opcoes: ["Sim", "Nao", "Nao sabe", "Nao respondeu"] },
  { enunciado: "Voc√™ se considera bem informado sobre pol√≠tica?", opcoes: ["Sim", "Nao", "Mais ou menos"] },
  { enunciado: "Com que frequ√™ncia voc√™ acompanha not√≠cias sobre pol√≠tica?", opcoes: ["Todos os dias", "Algumas vezes na semana", "Raramente", "Nunca"] },
  { enunciado: "Qual o principal meio pelo qual voc√™ se informa sobre pol√≠tica?", opcoes: ["TV", "R√°dio", "Internet / Redes sociais", "Jornais impressos", "Outro"] },
  { enunciado: "Voc√™ acha que debates entre candidatos influenciam seu voto?", opcoes: ["Sim", "Nao", "Pouco", "Nao sabe"] },
  { enunciado: "Voc√™ costuma pesquisar propostas dos candidatos antes de votar?", opcoes: ["Sim", "Nao", "√Äs vezes"] },
  { enunciado: "Voc√™ acredita que os pol√≠ticos cumprem suas promessas de campanha?", opcoes: ["Sim", "Nao", "Raramente", "Nao sabe"] },
  { enunciado: "Voc√™ j√° mudou seu voto durante a campanha por causa de not√≠cias ou debates?", opcoes: ["Sim", "Nao"] },
  { enunciado: "O que mais influencia sua decis√£o de voto?", opcoes: ["Propostas", "Hist√≥rico do candidato", "Opini√£o de familiares/amigos", "M√≠dia", "Outro"] },
  { enunciado: "Voc√™ acredita que deveria haver limite de mandatos para todos os cargos pol√≠ticos?", opcoes: ["Sim", "Nao", "Nao sabe"] },
  { enunciado: "Voc√™ acha que deveria haver mais incentivo para candidaturas de jovens?", opcoes: ["Sim", "Nao", "Nao sabe"] },
  { enunciado: "Voc√™ acha que deveria haver mais incentivo para candidaturas femininas?", opcoes: ["Sim", "Nao", "Nao sabe"] },
  { enunciado: "Voc√™ acha que o financiamento p√∫blico de campanhas √© uma boa medida?", opcoes: ["Sim", "Nao", "Nao sabe"] },
  { enunciado: "Voc√™ acredita que o voto pela internet deveria ser implantado no Brasil?", opcoes: ["Sim", "Nao", "Nao sabe"] }
];

// üîπ Controle de votos
let respostasDadas = 0;

// üîπ Renderizar quiz
function mostrarQuiz() {
  const container = document.getElementById("quiz-container");
  container.innerHTML = "";
  perguntas.forEach((p,i)=>{
    let html = `<div class="question">${i+1}. ${p.enunciado}</div>`;
    p.opcoes.forEach(op=>{
      html += `<div class="option" id="q${i}-${op}" onclick="votar(${i}, '${op}')">${op}</div>`;
    });
    container.innerHTML += html + "<hr>";
  });
}

// üîπ Fun√ß√£o votar
function votar(numPergunta, opcao){
  const ref = db.ref("quiz/"+numPergunta+"/"+opcao);
  ref.transaction(v => (v||0)+1 );

  const opcoesDiv = document.querySelectorAll(`[id^=q${numPergunta}-]`);
  opcoesDiv.forEach(div=> div.classList.add("disabled")); // desabilita s√≥ temporariamente
  respostasDadas++;
  if(respostasDadas === perguntas.length){
    mostrarResultados();
  }
}

// üîπ Mostrar resultados em tempo real
function mostrarResultados(){
  const resultsDiv = document.getElementById("results");
  resultsDiv.innerHTML = "<h2>Resultados:</h2>";

  perguntas.forEach((p,i)=>{
    const ref = db.ref("quiz/"+i);
    ref.on("value", snap=>{
      const dados = snap.val() || {};
      let bloco = `<b>${i+1}. ${p.enunciado}</b><br>`;
      p.opcoes.forEach(op=>{
        bloco += `${op}: ${dados[op]||0} votos<br>`;
      });
      bloco += "<br>";

      const old = document.getElementById("res-"+i);
      if(old){
        old.innerHTML = bloco;
      } else {
        const div = document.createElement("div");
        div.id = "res-"+i;
        div.innerHTML = bloco;
        resultsDiv.appendChild(div);
      }
    });
  });
}

mostrarQuiz();
</script>
</body>
</html>